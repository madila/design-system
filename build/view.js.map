{"version":3,"file":"view.js","mappings":"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","sources":["webpack://design-system/./src/helpers/Events.js","webpack://design-system/external module \"@wordpress/interactivity\"","webpack://design-system/webpack/bootstrap","webpack://design-system/webpack/runtime/define property getters","webpack://design-system/webpack/runtime/hasOwnProperty shorthand","webpack://design-system/webpack/runtime/make namespace object","webpack://design-system/./src/view.js"],"sourcesContent":["export const navigateToFrame = new CustomEvent(\"frame-navigates-to\", {\n        bubbles: true\n    });\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n *\n *\n */\nimport {getElement, getContext, withScope, store} from '@wordpress/interactivity';\nimport {navigateToFrame} from './helpers/Events';\n\nconst {state, callbacks, actions} = store( 'design-system-frame', {\n    state: {\n        w: null,\n        NF: 30\n    },\n    actions: {\n        _setFrame: () => {\n            const { ref } = getElement();\n            const context = getContext();\n\n            context.locked = false;\n            const target = ref.classList.contains('wp-block-design-system-frame') ? ref.firstElementChild : ref.parentElement;\n\n            target.style.setProperty('--i', context.current);\n            target.classList.remove('smooth');\n\n            const {children} = target.firstElementChild;\n            [...children].forEach((item, index) => {\n                item.ariaCurrent = (index === context.current) ? 'step' : null;\n                item.ariaRoleDescription = \"slide\";\n                item.role = \"tabpanel\";\n                //item.tabIndex = 0;\n            });\n\n        },\n        unify: (e) => { return e.changedTouches ? e.changedTouches[0] : e },\n        lock: (e) => {\n            const {ref} = getElement();\n            const context = getContext();\n\n            context.x0 = actions.unify(e).clientX;\n            context.locked = true;\n            ref.parentElement.classList.add('smooth');\n        },\n        drag: (e) => {\n            e.preventDefault();\n            const context = getContext();\n            if (!context.locked) return;\n            context.drag = true;\n            const { ref } = getElement();\n            const unifiedX = actions.unify(e).clientX;\n\n            let dx = unifiedX - context.x0,\n                f = +(dx / state.w).toFixed(2);\n\n            ref.parentElement.style.setProperty('--i', `${context.current - f}`);\n        },\n        move: (e) => {\n            const context = getContext();\n            if(!context.locked) return;\n            context.drag = false;\n\n            let dx = actions.unify(e).clientX - context.x0,\n                s = Math.sign(dx),\n                f = +(s*dx/state.w).toFixed(2);\n\n            context.ini = context.current - s*f;\n\n            if((context.current > 0 || s < 0) && (context.current < context.N - 1 || s > 0) && f > .2) {\n                context.current -= s;\n                f = 1 - f\n            }\n\n            context.fin = context.current;\n            context.anf = Math.round(f*context.NF);\n\n            context.x0 = null;\n\n            context.current = Math.round(context.fin.toFixed());\n\n            actions._setFrame(e);\n        },\n        keydown: (e) => {\n            const { keyCode } = e;\n\n            const context = getContext();\n            let nextFrame = context.current,\n                foundIndex,\n                shouldUpdate = false;\n\n            switch (keyCode) {\n                case 37:\n                    e.preventDefault();\n                    foundIndex = context.current - 1;\n                    shouldUpdate = foundIndex < 0;\n                    nextFrame = shouldUpdate ? 0 : foundIndex;\n                    break;\n                case 39:\n                    e.preventDefault();\n                    foundIndex = context.current + 1;\n                    shouldUpdate = foundIndex >= context.N;\n                    nextFrame = shouldUpdate ? context.current : foundIndex;\n                    break;\n                default:\n                    break;\n            }\n\n            context.current = nextFrame;\n            context.fin = context.current;\n            context.locked = shouldUpdate;\n\n            actions._setFrame();\n        },\n        dispatchNavigationEvent: (e) => {\n            e.preventDefault();\n\n            const context = getContext();\n\n            const {ref} = getElement();\n            context.dot.selected = true;\n            context.current = 'index' in ref.dataset ? parseInt(ref.dataset.index) : context.current;\n\n            ref.dispatchEvent(navigateToFrame);\n        },\n        onNavigation: (e) => {\n            e.stopPropagation();\n            actions._setFrame();\n        },\n        start: () => {\n            const { ref } = getElement();\n            const context = getContext();\n\n            callbacks.size();\n\n            context.N = ref.children.length;\n            context.ready = true;\n\n            const { x, width } = ref.parentElement.parentElement.getBoundingClientRect();\n            const { innerWidth } = window;\n\n            ref.parentElement.style.setProperty('--n', `${context.N}`);\n            ref.parentElement.style.setProperty('--frame-offset-left', `${x}px`);\n            ref.parentElement.style.setProperty('--frame-offset-right', `${innerWidth - (width + x)}px`);\n\n            actions._setFrame();\n        }\n    },\n    callbacks: {\n        size: () => {\n            state.w = window.innerWidth;\n            const { ref } = getElement();\n\n            const { x, width } = ref.parentElement.parentElement.getBoundingClientRect();\n            const { innerWidth } = window;\n            ref.parentElement.style.setProperty('--frame-offset-left', `${x}px`);\n            ref.parentElement.style.setProperty('--frame-offset-right', `${innerWidth - (width + x)}px`);\n        },\n        resetSelected: (e) => {\n            const context = getContext('design-system-frame');\n            const { ref } = getElement();\n\n            context.list.forEach((item) => item.disabled = (item.index === context.current) ? 'disabled' : null);\n        }\n    },\n} );\n"],"names":["navigateToFrame","CustomEvent","bubbles","getElement","getContext","withScope","store","state","callbacks","actions","w","NF","_setFrame","ref","context","locked","target","classList","contains","firstElementChild","parentElement","style","setProperty","current","remove","children","forEach","item","index","ariaCurrent","ariaRoleDescription","role","unify","e","changedTouches","lock","x0","clientX","add","drag","preventDefault","unifiedX","dx","f","toFixed","move","s","Math","sign","ini","N","fin","anf","round","keydown","keyCode","nextFrame","foundIndex","shouldUpdate","dispatchNavigationEvent","dot","selected","dataset","parseInt","dispatchEvent","onNavigation","stopPropagation","start","size","length","ready","x","width","getBoundingClientRect","innerWidth","window","resetSelected","list","disabled"],"sourceRoot":""}