{"version":3,"file":"view.js","mappings":"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","sources":["webpack://design-system/./src/helpers/Events.js","webpack://design-system/external module \"@wordpress/interactivity\"","webpack://design-system/webpack/bootstrap","webpack://design-system/webpack/runtime/define property getters","webpack://design-system/webpack/runtime/hasOwnProperty shorthand","webpack://design-system/webpack/runtime/make namespace object","webpack://design-system/./src/view.js"],"sourcesContent":["export const navigateToFrame = new CustomEvent(\"frame-navigates-to\", {\n        bubbles: true\n    });\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n *\n *\n */\nimport {getElement, getContext, withScope, store} from '@wordpress/interactivity';\nimport {navigateToFrame} from './helpers/Events';\n\nconst {state, callbacks, actions} = store( 'design-system-frame', {\n    state: {\n        locked: false,\n        scrolled: false,\n        drag: true,\n        current: 0,\n        w: null,\n        x0: null,\n        N: 0,\n        ini: null,\n        fin: 0,\n        anf: null,\n        NF: 30\n    },\n    actions: {\n        _setFrame: () => {\n            state.locked = false;\n            const { ref } = getElement();\n\n            const target = ref.classList.contains('wp-block-design-system-frame') ? ref.firstElementChild : ref.parentElement;\n\n            console.log(target);\n\n            target.style.setProperty('--i', state.current);\n            target.classList.remove('smooth');\n        },\n        unify: (e) => { return e.changedTouches ? e.changedTouches[0] : e },\n        lock: (e) => {\n            const {ref} = getElement();\n\n            state.x0 = actions.unify(e).clientX;\n            state.locked = true;\n            ref.parentElement.classList.add('smooth');\n        },\n        drag: (e) => {\n            e.preventDefault();\n            if (!state.locked) return;\n            state.drag = true;\n            const { ref } = getElement();\n            const unifiedX = actions.unify(e).clientX;\n\n            let dx = unifiedX - state.x0,\n                f = +(dx / state.w).toFixed(2);\n\n            ref.parentElement.style.setProperty('--i', `${state.current - f}`);\n        },\n        move: (e) => {\n            if(!state.locked) return;\n            state.drag = false;\n\n            let dx = actions.unify(e).clientX - state.x0,\n                s = Math.sign(dx),\n                f = +(s*dx/state.w).toFixed(2);\n\n            state.ini = state.current - s*f;\n\n            if((state.current > 0 || s < 0) && (state.current < state.N - 1 || s > 0) && f > .2) {\n                state.current -= s;\n                f = 1 - f\n            }\n\n            const { ref } = getElement();\n\n            state.fin = state.current;\n            state.anf = Math.round(f*state.NF);\n\n            state.x0 = null;\n\n            state.current = Math.round(state.fin.toFixed());\n\n            actions._setFrame(e);\n        },\n        keydown: (e) => {\n            const { keyCode } = e;\n\n            let nextFrame = state.current,\n                foundIndex,\n                shouldUpdate = false;\n\n            switch (keyCode) {\n                case 37:\n                    e.preventDefault();\n                    foundIndex = state.current - 1;\n                    shouldUpdate = foundIndex < 0;\n                    nextFrame = shouldUpdate ? 0 : foundIndex;\n                    break;\n                case 39:\n                    e.preventDefault();\n                    foundIndex = state.current + 1;\n                    shouldUpdate = foundIndex >= state.N;\n                    nextFrame = shouldUpdate ? state.current : foundIndex;\n                    break;\n                default:\n                    break;\n            }\n\n            state.current = nextFrame;\n            state.fin = state.current;\n            state.locked = shouldUpdate;\n\n            actions._setFrame();\n        },\n        dispatchNavigationEvent: (e) => {\n            e.preventDefault();\n\n            const context = getContext();\n\n            const {ref} = getElement();\n            context.dot.selected = true;\n            state.current = 'index' in ref.dataset ? parseInt(ref.dataset.index) : state.current;\n\n            ref.dispatchEvent(navigateToFrame);\n\n        },\n        onNavigation: function*(e) {\n            e.stopPropagation();\n            actions._setFrame();\n        },\n        start: () => {\n            const { ref } = getElement();\n            const context = getContext();\n\n            callbacks.size();\n\n            state.N = ref.children.length;\n            context.ready = true;\n\n            const { x, width } = ref.parentElement.parentElement.getBoundingClientRect();\n            const { innerWidth } = window;\n            ref.parentElement.style.setProperty('--frame-offset-left', `${x}px`);\n            ref.parentElement.style.setProperty('--frame-offset-right', `${innerWidth - (width + x)}px`);\n            actions._setFrame();\n        }\n    },\n    callbacks: {\n        size: () => {\n            state.w = window.innerWidth;\n            const { ref } = getElement();\n\n            const { x, width } = ref.parentElement.parentElement.getBoundingClientRect();\n            const { innerWidth } = window;\n            ref.parentElement.style.setProperty('--frame-offset-left', `${x}px`);\n            ref.parentElement.style.setProperty('--frame-offset-right', `${innerWidth - (width + x)}px`);\n        },\n        resetSelected: () => {\n            const context = getContext('design-system-frame');\n            context.list.forEach((item) => item.selected = item.index === state.current);\n        }\n    },\n} );\n"],"names":["navigateToFrame","CustomEvent","bubbles","getElement","getContext","withScope","store","state","callbacks","actions","locked","scrolled","drag","current","w","x0","N","ini","fin","anf","NF","_setFrame","ref","target","classList","contains","firstElementChild","parentElement","console","log","style","setProperty","remove","unify","e","changedTouches","lock","clientX","add","preventDefault","unifiedX","dx","f","toFixed","move","s","Math","sign","round","keydown","keyCode","nextFrame","foundIndex","shouldUpdate","dispatchNavigationEvent","context","dot","selected","dataset","parseInt","index","dispatchEvent","onNavigation","stopPropagation","start","size","children","length","ready","x","width","getBoundingClientRect","innerWidth","window","resetSelected","list","forEach","item"],"sourceRoot":""}