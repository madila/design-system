import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(s={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},c={},t.d(c,s),c),r=new CustomEvent("frame-navigates-to",{bubbles:!0}),{state:o,callbacks:i,actions:a}=(0,n.store)("design-system-frame",{state:{w:null,NF:50,rID:null,n:null,clientX:0},actions:{runAnimation:(e=0)=>{const t=(0,n.getContext)("design-system-frame");t.current=t.ini+(t.fin-t.ini)*i.bounceOut(e/t.anf),e!==t.anf?o.rID=requestAnimationFrame((0,n.withScope)((()=>a.runAnimation(++e)))):a.cancelAnimation()},cancelAnimation:()=>{cancelAnimationFrame(o.rID),o.rID=null},_setFrame:()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)();t.locked=!1;const r=e.classList.contains("wp-block-design-system-frame")?e.firstElementChild:e.parentElement;r.style.setProperty("--i",t.current),r.classList.remove("smooth");const{children:o}=r.firstElementChild;[...o].forEach(((e,n)=>{e.ariaCurrent=n===t.current?"step":null}))},unify:e=>e?(o.clientX=e.changedTouches?e.changedTouches[0]:e,o.clientX):o.clientX,lock:e=>{const{ref:t}=(0,n.getElement)(),r=(0,n.getContext)();r.x0=a.unify(e).clientX,r.locked=!0,t.parentElement.classList.add("smooth"),t.onpointermove=(0,n.withScope)((e=>{a.drag(e)})),t.setPointerCapture(e.pointerId)},drag:e=>{e.preventDefault();const t=(0,n.getContext)();if(!t.locked)return;t.drag=!0;const{ref:r}=(0,n.getElement)(),i=+((a.unify(e).clientX-t.x0)/o.w).toFixed(2);t.tension++;const s=t.current-i;r.parentElement.style.setProperty("--i",`${s}`);const c=s-t.current;(c>.4||c<-.4||t.tension>20)&&a.move(e)},move:e=>{const t=(0,n.getContext)();if(!t.locked)return;t.tension=0;const r=a.unify(e).clientX-t.x0,i=Math.sign(r);let s=+(i*r/o.w).toFixed(2);t.ini=t.current-i*s,(t.current>0||i<0)&&(t.current<t.N-1||i>0)&&s>.2&&(t.current-=i,s=1-s),t.fin=t.current,t.anf=Math.round(s*o.NF),o.n=2+Math.round(s),a.runAnimation(),t.x0=null,t.current=Math.round(t.fin.toFixed());const{ref:c}=(0,n.getElement)();c.onpointermove=null,e&&c.releasePointerCapture(e.pointerId),a._setFrame(e)},keydown:e=>{const{keyCode:t}=e,r=(0,n.getContext)();let o,i=r.current,s=!1;switch(t){case 37:e.preventDefault(),o=r.current-1,s=o<0,i=s?0:o;break;case 39:e.preventDefault(),o=r.current+1,s=o>=r.N,i=s?r.current:o}r.current=i,r.fin=r.current,r.locked=s,a._setFrame()},dispatchNavigationEvent:e=>{e.preventDefault();const t=(0,n.getContext)(),{ref:o}=(0,n.getElement)();t.dot.selected=!0,t.current="index"in o.dataset?parseInt(o.dataset.index):t.current,o.dispatchEvent(r)},onNavigation:e=>{e.stopPropagation(),a._setFrame()},start:()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)();i.size(),t.N=e.children.length,t.ready=!0;const{x:r,width:o}=e.parentElement.parentElement.getBoundingClientRect(),{innerWidth:s}=window;e.parentElement.style.setProperty("--n",`${t.N}`),e.parentElement.style.setProperty("--frame-offset-left",`${r}px`),e.parentElement.style.setProperty("--frame-offset-right",s-(o+r)+"px");const{children:c}=e;[...c].forEach(((n,r)=>{n.ariaCurrent=r===t.current?"step":null,n.ariaRoleDescription="slide",n.role="tabpanel",n.id=`${e.id}-${r}`})),a._setFrame()}},callbacks:{size:()=>{o.w=window.innerWidth;const{ref:e}=(0,n.getElement)(),{x:t,width:r}=e.parentElement.parentElement.getBoundingClientRect(),{innerWidth:i}=window;e.parentElement.style.setProperty("--frame-offset-left",`${t}px`),e.parentElement.style.setProperty("--frame-offset-right",i-(r+t)+"px")},resetSelected:()=>{const e=(0,n.getContext)("design-system-frame");e.list.forEach((t=>t.disabled=t.index===e.current?"true":null))},bounceOut:(e,t=2.75,n=1.5)=>1-Math.pow(1-e,t)*Math.abs(Math.cos(Math.pow(e,n)*(o.n+.5)*Math.PI))}});var s,c;