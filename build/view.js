import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(s={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},l={},t.d(l,s),l),r=new CustomEvent("frame-navigates-to",{bubbles:!0}),{state:o,callbacks:a,actions:i}=(0,n.store)("design-system-frame",{state:{w:null,NF:50,rID:null,n:null},actions:{runAnimation:(e=0)=>{const t=(0,n.getContext)("design-system-frame");t.current=t.ini+(t.fin-t.ini)*a.bounceOut(e/t.anf),e!==t.anf?o.rID=requestAnimationFrame((0,n.withScope)((()=>i.runAnimation(++e)))):i.cancelAnimation()},cancelAnimation:()=>{cancelAnimationFrame(o.rID),o.rID=null},_setFrame:()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)();t.locked=!1;const r=e.classList.contains("wp-block-design-system-frame")?e.firstElementChild:e.parentElement;r.style.setProperty("--i",t.current),r.classList.remove("smooth");const{children:o}=r.firstElementChild;[...o].forEach(((e,n)=>{e.ariaCurrent=n===t.current?"step":null}))},unify:e=>e.changedTouches?e.changedTouches[0]:e,lock:e=>{const{ref:t}=(0,n.getElement)(),r=(0,n.getContext)();r.x0=i.unify(e).clientX,r.locked=!0,t.parentElement.classList.add("smooth"),t.onpointermove=(0,n.withScope)((e=>{i.drag(e)})),t.setPointerCapture(e.pointerId)},drag:e=>{e.preventDefault();const t=(0,n.getContext)();if(!t.locked)return;t.drag=!0;const{ref:r}=(0,n.getElement)(),a=+((i.unify(e).clientX-t.x0)/o.w).toFixed(2);r.parentElement.style.setProperty("--i",""+(t.current-a))},move:e=>{const t=(0,n.getContext)();if(!t.locked)return;t.drag=!1;const{ref:r}=(0,n.getElement)();r.onpointermove=null,r.releasePointerCapture(e.pointerId);const a=i.unify(e).clientX-t.x0,s=Math.sign(a);let l=+(s*a/o.w).toFixed(2);t.ini=t.current-s*l,(t.current>0||s<0)&&(t.current<t.N-1||s>0)&&l>.2&&(t.current-=s,l=1-l),t.fin=t.current,t.anf=Math.round(l*o.NF),o.n=2+Math.round(l),i.runAnimation(),t.x0=null,t.current=Math.round(t.fin.toFixed()),i._setFrame(e)},keydown:e=>{const{keyCode:t}=e,r=(0,n.getContext)();let o,a=r.current,s=!1;switch(t){case 37:e.preventDefault(),o=r.current-1,s=o<0,a=s?0:o;break;case 39:e.preventDefault(),o=r.current+1,s=o>=r.N,a=s?r.current:o}r.current=a,r.fin=r.current,r.locked=s,i._setFrame()},dispatchNavigationEvent:e=>{e.preventDefault();const t=(0,n.getContext)(),{ref:o}=(0,n.getElement)();t.dot.selected=!0,t.current="index"in o.dataset?parseInt(o.dataset.index):t.current,o.dispatchEvent(r)},onNavigation:e=>{e.stopPropagation(),i._setFrame()},start:()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)();a.size(),t.N=e.children.length,t.ready=!0;const{x:r,width:o}=e.parentElement.parentElement.getBoundingClientRect(),{innerWidth:s}=window;e.parentElement.style.setProperty("--n",`${t.N}`),e.parentElement.style.setProperty("--frame-offset-left",`${r}px`),e.parentElement.style.setProperty("--frame-offset-right",s-(o+r)+"px");const{children:l}=e;[...l].forEach(((n,r)=>{n.ariaCurrent=r===t.current?"step":null,n.ariaRoleDescription="slide",n.role="tabpanel",n.id=`${e.id}-${r}`})),i._setFrame()}},callbacks:{size:()=>{o.w=window.innerWidth;const{ref:e}=(0,n.getElement)(),{x:t,width:r}=e.parentElement.parentElement.getBoundingClientRect(),{innerWidth:a}=window;e.parentElement.style.setProperty("--frame-offset-left",`${t}px`),e.parentElement.style.setProperty("--frame-offset-right",a-(r+t)+"px")},resetSelected:()=>{const e=(0,n.getContext)("design-system-frame");e.list.forEach((t=>t.disabled=t.index===e.current?"true":null))},bounceOut:(e,t=2.75,n=1.5)=>1-Math.pow(1-e,t)*Math.abs(Math.cos(Math.pow(e,n)*(o.n+.5)*Math.PI))}});var s,l;